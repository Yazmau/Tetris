// generated by FALLING_PIECE_UPDATE_GENERATE.cpp

`timescale 1ns / 1ps
`include "__BUS.h"

module falling_piece_update(clk,reset,falling_piece_i,falling_piece_j,falling_piece_type,falling_piece_angle,op_type,pos_i,pos_j,piece_type,
                            check_done,valid,write_enable,new_piece_type,update_done);
    input clk,reset;
    input [4:0] falling_piece_i,falling_piece_j;
    input [2:0] falling_piece_type;
    input [1:0] falling_piece_angle;
    
    input [2:0] op_type;

    output reg [4:0] pos_i,pos_j;
    input [2:0] piece_type;
    output check_done;
    output reg valid;
    
    output reg write_enable;
    output reg [2:0] new_piece_type;
    output update_done;
    
    reg next_valid;
    
    reg [1:0] state,next_state;
    
    parameter WAIT_STATE = 2'd0;
    
    parameter CHECK_STATE = 2'd1;
    
    parameter UPDATE_STATE = 2'd2;
    
    reg [3:0] cnt,next_cnt;
    
    assign check_done = (cnt == 4'd5 && state == CHECK_STATE) ? 1'b1 : 1'b0;
    
    assign update_done = (cnt == 4'd8) ? 1'b1 : 1'b0;
    
    always@(posedge clk) begin
        if(reset == 1'b1) begin
            state <= WAIT_STATE;

            valid <= 1'b0;
            
            cnt <= 4'd0;
        end
        else begin
            state <= next_state;
            
            valid <= next_valid;
            
            cnt <= next_cnt;
        end
    end
    
    always@(*) begin
        next_state = state;
        next_valid = valid;
        next_cnt = cnt;
        write_enable = 1'b0;
        new_piece_type = `NULL_PIECE;
        case(state)
            WAIT_STATE: begin
                next_state = (op_type != `NULL_OP) ? CHECK_STATE : WAIT_STATE;
                next_cnt = 4'd0;
                next_valid = 1'b1;
            end
            CHECK_STATE: begin
                case(op_type)
                    `LEFT_MOVE_OP: begin
                        case(falling_piece_type)
                            `Q_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `S_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `Z_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `T_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `L_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `J_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `I_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 3 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 3 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 3 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 3 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 3;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 3 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 3 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 3 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 3 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 3 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 3 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 3 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 3;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 3 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 3 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 3 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 3 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 3 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 3 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 0 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 3;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 2 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 3 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 3 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 3 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 3 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 3 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 3 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 3 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 3;
                                                pos_j = falling_piece_j - 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 3 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 0 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 1 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 2 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 3 ) & ( falling_piece_j - 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                        endcase
                    end
                    `RIGHT_MOVE_OP: begin
                        case(falling_piece_type)
                            `Q_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `S_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `Z_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `T_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `L_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `J_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `I_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 3 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 3 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 3 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 3 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 3;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 3 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 3 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 3 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 3 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 3 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 3 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 3 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 3;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 3 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 3 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 3 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 3 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 3 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 3 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 0 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 3;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 2 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 3 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 3 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 3 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 3 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 3 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 3 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 3 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 3;
                                                pos_j = falling_piece_j + 1 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 3 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 0 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 1 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 2 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 3 ) & ( falling_piece_j + 1 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                        endcase
                    end
                    `DOWN_MOVE_OP: begin
                        case(falling_piece_type)
                            `Q_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `S_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `Z_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `T_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `L_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `J_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `I_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 3;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 3 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 3 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 3 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 3 == falling_piece_i + 3 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 3 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 3 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1 + 3;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 3 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 3 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 3 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 3 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 3 == falling_piece_i + 3 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 3;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 3 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 3 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 3 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 3 == falling_piece_i + 3 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 0 == falling_piece_i + 3 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 1 == falling_piece_i + 3 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1 + 3;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 2 == falling_piece_i + 3 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 3 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 3 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 3 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 1 + 3 == falling_piece_i + 3 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                        endcase
                    end
                    `SPIN_OP: begin
                        case(falling_piece_type)
                            `Q_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `S_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `Z_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `T_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `L_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `J_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `I_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 3;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 3 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 3 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 3 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 3;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 3 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 3 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 2 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 0 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 3;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 2 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 0 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 2 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 3 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 3 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 3 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 3 ) & ( falling_piece_j + 0 + 0 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 3 ) & ( falling_piece_j + 0 + 1 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 3;
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 3 ) & ( falling_piece_j + 0 + 2 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd4: begin
                                                next_cnt = cnt + 1'b1;
                                                next_valid = ( valid & ( pos_i < `BOARD_HEIGHT ) & ( pos_j < `BOARD_WIDTH ) & ( ( (cnt == 4'd0) | (piece_type == `NULL_PIECE) )  | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 0 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 1 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 2 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 1 ) ) | ( ( cnt != 4'd0 ) &( falling_piece_i + 0 + 1 == falling_piece_i + 3 ) & ( falling_piece_j + 0 + 3 == falling_piece_j + 1 ) ) ) );
                                            end
                                            4'd5: begin
                                                next_state = (valid == 1'b1) ? UPDATE_STATE : WAIT_STATE;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                        endcase
                    end
                    default: begin
                    end
                endcase
            end
            UPDATE_STATE: begin
                case(op_type)
                    `LEFT_MOVE_OP: begin
                        case(falling_piece_type)
                            `Q_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `S_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `Z_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `T_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `L_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `J_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `I_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 3;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 3;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 3;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 3;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 3;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 3;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 3;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 3;
                                                pos_j = falling_piece_j - 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                        endcase
                    end
                    `RIGHT_MOVE_OP: begin
                        case(falling_piece_type)
                            `Q_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `S_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `Z_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `T_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `L_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `J_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `I_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 3;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 3;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 3;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 3;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 3;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 3;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 3;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 3;
                                                pos_j = falling_piece_j + 1 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                        endcase
                    end
                    `DOWN_MOVE_OP: begin
                        case(falling_piece_type)
                            `Q_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `S_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `Z_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `T_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `L_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `J_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `I_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 3;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 3;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 3;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 1 + 3;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 3;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 3;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 3;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 1 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 1 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 1 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 1 + 3;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                        endcase
                    end
                    `SPIN_OP: begin
                        case(falling_piece_type)
                            `Q_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Q_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `S_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `S_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `Z_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `Z_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `T_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `T_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `L_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `L_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `J_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `J_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                            `I_PIECE: begin
                                case(falling_piece_angle)
                                    2'd0: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 3;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 3;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd1: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 3;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 3;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd2: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 3;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 0;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 2;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 3;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                    2'd3: begin
                                        case(cnt)
                                            4'd0: begin
                                                pos_i = falling_piece_i + 0;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd1: begin
                                                pos_i = falling_piece_i + 1;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd2: begin
                                                pos_i = falling_piece_i + 2;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd3: begin
                                                pos_i = falling_piece_i + 3;
                                                pos_j = falling_piece_j + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `NULL_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd4: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 0;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd5: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 1;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd6: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 2;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd7: begin
                                                pos_i = falling_piece_i + 0 + 1;
                                                pos_j = falling_piece_j + 0 + 3;
                                                write_enable = 1'b1;
                                                new_piece_type = `I_PIECE;
                                                next_cnt = cnt + 1'b1;
                                            end
                                            4'd8: begin
                                                next_state = WAIT_STATE;
                                                write_enable = 1'b0;
                                                next_cnt = 4'd0;
                                            end
                                        endcase
                                    end
                                endcase
                            end
                        endcase
                    end
                    default: begin
                    end
                endcase
            end            
        endcase
    end
endmodule